{% extends "base_generic.html" %}
{% load static %}

{% block extra_head %}
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="{% static 'js/chatbot.js' %}"></script>
{% endblock %}

{% block content %}
    <h2>Learn Now</h2>
    <p>Watch the Introduction to Data and Data Science video:</p>

    <div class="video-container mt-4">
        <video id="myVideo" width="600" controls>
            <source src="{{ video_url }}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="mt-4">
        <h3>Upload Transcript</h3>
        <input type="file" id="transcript-file" accept=".txt,.vtt">
        <button onclick="uploadTranscript()">Upload</button>
    </div>

    <div class="mt-4">
        <h3>Select Transcript</h3>
        <select id="transcript-select">
            {% for transcript in transcripts %}
                <option value="{{ transcript }}">{{ transcript }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- The chatbot will be inserted here by the JavaScript -->
{% endblock %}

{% block script %}
    <script>
        console.log('Chatbot script loaded');
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded');
            if (document.getElementById('chatbot')) {
                console.log('Chatbot element found');
            } else {
                console.log('Chatbot element not found');
            }
        });
    </script>
{% endblock %}
